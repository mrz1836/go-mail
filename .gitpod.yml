# Gitpod workspace configuration for this project.
# Uses magex for build tooling, linting, and testing.
# This creates a one-click development environment for contributors

image: gitpod/workspace-go:latest

tasks:
  - name: setup-and-test
    init: |
      echo "ğŸš€ Setting up development environment..."
      echo "ğŸ“¦ Installing MAGE-X build tool..."
      go install github.com/mrz1836/mage-x/cmd/magex@latest

      echo "ğŸ”½ Downloading dependencies..."
      magex deps:download

      echo "ğŸ” Running linters..."
      magex lint

      echo "âœ… Running initial tests..."
      magex test

    command: |
      echo "==============================================="
      echo "ğŸ¯ Welcome to development environment!"
      echo "==============================================="
      echo ""
      echo "ğŸ› ï¸  Available magex commands:"
      echo "  magex test       - Run all tests"
      echo "  magex lint       - Run linters"
      echo "  magex format:fix - Format the code"
      echo "  magex build      - Build the project (binary)"
      echo "  magex help       - List all available commands"
      echo ""
      echo "ğŸ“– Quick start:"
      echo "  1. Try: magex test"
      echo "  2. Make your changes"
      echo "  3. Run: magex format:fix && magex lint && magex test:race"
      echo "  4. Commit and push your changes"
      echo ""
      echo "ğŸ’¡ For more help: magex help"
      echo "==============================================="

ports:
  - port: 8080
    onOpen: ignore
    description: Application (if needed)

vscode:
  extensions:
    - golang.go
    - github.vscode-pull-request-github
    - streetsidesoftware.code-spell-checker
    - eamodio.gitlens
